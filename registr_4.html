<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skills & Expertise Form with Captcha</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      color: #111827;
      margin: 24px auto;
      max-width: 640px;
      padding: 0 24px;
    }
    h2, h3 {
      font-weight: 600;
      margin-bottom: 12px;
    }
    h2 {
      font-size: 14px;
    }
    h3 {
      font-size: 12px;
    }
    label {
      font-size: 10px;
      font-weight: 400;
      color: #374151;
      display: block;
      margin-bottom: 4px;
    }
    input[type="text"],
    textarea {
      font-size: 10px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      padding: 6px 10px;
      width: 100%;
      box-sizing: border-box;
      color: #6b7280;
      outline: none;
      transition: border-color 0.2s ease;
    }
    input[type="text"]:focus,
    textarea:focus {
      border-color: #2563eb;
      color: #111827;
    }
    textarea {
      resize: none;
      min-height: 60px;
    }
    .tags-container {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 10px;
      color: #4b5563;
    }
    .tag {
      background: #f3f4f6;
      border-radius: 9999px;
      padding: 4px 8px;
      display: flex;
      align-items: center;
      gap: 6px;
      user-select: none;
    }
    .tag i {
      cursor: pointer;
      color: #9ca3af;
    }
    .website-input-wrapper {
      position: relative;
    }
    .website-input-wrapper i {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
      font-size: 12px;
      pointer-events: none;
    }
    .website-input-wrapper input {
      padding-left: 28px;
    }
    .captcha-section {
      margin-bottom: 16px;
    }
    .captcha-row {
      display: flex;
      gap: 8px;
      max-width: 320px;
      margin-bottom: 8px;
      align-items: center;
    }
    .captcha-code {
      flex: 1;
      background: #e5e7eb;
      font-weight: 600;
      font-size: 10px;
      text-align: center;
      padding: 6px 0;
      border-radius: 4px;
      user-select: none;
      font-family: monospace;
      letter-spacing: 3px;
      user-select: text;
    }
    .captcha-options-btn {
      border: 1px solid #d1d5db;
      background: transparent;
      border-radius: 4px;
      padding: 6px 10px;
      cursor: pointer;
      color: #6b7280;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .captcha-options-btn:hover {
      background: #f3f4f6;
    }
    .captcha-send-btn {
      background: #2563eb;
      color: white;
      font-size: 10px;
      border-radius: 4px;
      padding: 6px 10px;
      line-height: 1.1;
      cursor: pointer;
      border: none;
      white-space: pre-line;
      user-select: none;
    }
    .captcha-send-btn:hover {
      background: #1e40af;
    }
    .captcha-error {
      font-size: 10px;
      color: #dc2626;
      margin-top: 4px;
      user-select: none;
      display: none;
    }
    .phone-email-section {
      display: flex;
      gap: 48px;
      flex-wrap: wrap;
      max-width: 640px;
      margin-bottom: 24px;
    }
    .phone-email-group {
      flex: 1 1 280px;
    }
    .code-inputs {
      display: flex;
      gap: 4px;
      margin-bottom: 4px;
    }
    .code-inputs input {
      width: 32px;
      height: 32px;
      text-align: center;
      font-size: 10px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      outline: none;
      color: #111827;
      transition: border-color 0.2s ease;
    }
    .code-inputs input:focus {
      border-color: #2563eb;
    }
    .resend-text {
      font-size: 10px;
      color: #2563eb;
      cursor: pointer;
      user-select: none;
    }
    .buttons-row {
      display: flex;
      align-items: center;
      gap: 12px;
      border-top: 1px solid #d1d5db;
      padding-top: 16px;
      flex-wrap: wrap;
      max-width: 640px;
    }
    .btn-back {
      font-size: 10px;
      font-weight: 400;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      padding: 6px 16px;
      background: white;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .btn-back:hover {
      background: #f3f4f6;
    }
    .btn-create {
      font-size: 10px;
      font-weight: 400;
      background: #2563eb;
      color: white;
      border-radius: 4px;
      padding: 6px 16px;
      cursor: pointer;
      border: none;
      line-height: 1.1;
      white-space: pre-line;
      user-select: none;
      transition: background-color 0.2s ease;
    }
    .btn-create:hover {
      background: #1e40af;
    }
    .terms-text {
      font-size: 10px;
      color: #6b7280;
      max-width: 320px;
      line-height: 1.3;
    }
    .terms-text a {
      color: #2563eb;
      text-decoration: none;
      cursor: pointer;
    }
    .terms-text a:hover {
      text-decoration: underline;
    }
    @media (max-width: 480px) {
      .phone-email-section {
        gap: 24px;
      }
      .phone-email-group {
        flex: 1 1 100%;
      }
      .buttons-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      .terms-text {
        max-width: 100%;
      }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
</head>
<body>
  <form id="profile-form" novalidate>
    <h2>Skills &amp; Expertise</h2>
    <label for="add-skill">Add Skills</label>
    <input id="add-skill" type="text" placeholder="Enter a skill" autocomplete="off" />
    <div class="tags-container" id="tags-container" aria-live="polite" aria-relevant="additions removals">
      <span class="tag">React <i class="fas fa-times" data-tag="React" role="button" tabindex="0" aria-label="Remove React skill"></i></span>
      <span class="tag">JavaScript <i class="fas fa-times" data-tag="JavaScript" role="button" tabindex="0" aria-label="Remove JavaScript skill"></i></span>
      <span class="tag">TypeScript <i class="fas fa-times" data-tag="TypeScript" role="button" tabindex="0" aria-label="Remove TypeScript skill"></i></span>
      <span class="tag">UI/UX Design <i class="fas fa-times" data-tag="UI/UX Design" role="button" tabindex="0" aria-label="Remove UI/UX Design skill"></i></span>
    </div>

    <h3>Additional Information</h3>

    <label for="summary">Professional Summary</label>
    <textarea id="summary" placeholder="Write a brief summary about yourself"></textarea>

    <label for="website">Website/Portfolio</label>
    <div class="website-input-wrapper">
      <i class="fas fa-globe" aria-hidden="true"></i>
      <input id="website" type="text" placeholder="Add your website or portfolio URL" />
    </div>

    <label>Captcha Verification</label>
    <div class="captcha-section">
      <div class="captcha-row">
        <canvas id="captcha-canvas" class="captcha-code" width="120" height="32" aria-label="Captcha code"></canvas>
        <button type="button" class="captcha-options-btn" aria-label="Refresh captcha" id="refresh-captcha"><i class="fas fa-sync-alt"></i></button>
        <button type="button" class="captcha-send-btn" id="send-otp-btn" aria-label="Send OTP">Sand<br>OTP</button>
      </div>
      <input type="text" placeholder="Enter captcha" id="captcha-input" aria-describedby="captcha-error" autocomplete="off" />
      <div id="captcha-error" class="captcha-error" role="alert" aria-live="assertive">Captcha does not match</div>
    </div>

    <div class="phone-email-section">
      <div class="phone-email-group">
        <label>Phone</label>
        <div class="code-inputs" id="phone-inputs">
          <input type="text" maxlength="1" inputmode="numeric" aria-label="Phone code digit 1" />
          <input type="text" maxlength="1" inputmode="numeric" aria-label="Phone code digit 2" />
          <input type="text" maxlength="1" inputmode="numeric" aria-label="Phone code digit 3" />
          <input type="text" maxlength="1" inputmode="numeric" aria-label="Phone code digit 4" />
          <input type="text" maxlength="1" inputmode="numeric" aria-label="Phone code digit 5" />
          <input type="text" maxlength="1" inputmode="numeric" aria-label="Phone code digit 6" />
        </div>
        <div class="resend-text" id="phone-resend" role="button" tabindex="0" aria-label="Resend phone code">Resend code</div>
      </div>
      <div class="phone-email-group">
        <label>Email</label>
        <div class="code-inputs" id="email-inputs">
          <input type="text" maxlength="1" aria-label="Email code digit 1" />
          <input type="text" maxlength="1" aria-label="Email code digit 2" />
          <input type="text" maxlength="1" aria-label="Email code digit 3" />
          <input type="text" maxlength="1" aria-label="Email code digit 4" />
          <input type="text" maxlength="1" aria-label="Email code digit 5" />
          <input type="text" maxlength="1" aria-label="Email code digit 6" />
        </div>
        <div class="resend-text" id="email-resend" role="button" tabindex="0" aria-label="Resend email code">Resend code</div>
      </div>
    </div>

    <div class="buttons-row">
      <button type="button" class="btn-back"><a href="registr_3.html">back</a></button>
      <button type="submit" class="btn-create">Create<br>Profile</button>
      <p class="terms-text">
        By clicking "Create Profile", you agree to our
        <a href="#">Terms of Service</a> and
        <a href="#">Privacy Policy</a>
      </p>
    </div>
  </form>

  <script>
    // Captcha generation and validation
    const captchaCanvas = document.getElementById('captcha-canvas');
    const ctx = captchaCanvas.getContext('2d');
    const captchaInput = document.getElementById('captcha-input');
    const captchaError = document.getElementById('captcha-error');
    const refreshBtn = document.getElementById('refresh-captcha');
    let captchaText = '';

    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateCaptchaText(length = 6) {
      const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; // Exclude confusing chars like I, O, 1, 0
      let text = '';
      for (let i = 0; i < length; i++) {
        text += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return text;
    }

    function drawCaptcha(text) {
      const width = captchaCanvas.width;
      const height = captchaCanvas.height;
      ctx.clearRect(0, 0, width, height);

      // Background
      ctx.fillStyle = '#e5e7eb';
      ctx.fillRect(0, 0, width, height);

      // Draw noise lines
      for (let i = 0; i < 5; i++) {
        ctx.strokeStyle = `rgba(0,0,0,${Math.random() * 0.2})`;
        ctx.beginPath();
        ctx.moveTo(randomInt(0, width), randomInt(0, height));
        ctx.lineTo(randomInt(0, width), randomInt(0, height));
        ctx.stroke();
      }

      // Draw text with random rotation and position
      ctx.font = '20px monospace';
      ctx.textBaseline = 'middle';
      const charSpace = width / text.length;
      for (let i = 0; i < text.length; i++) {
        const char = text.charAt(i);
        const x = i * charSpace + charSpace / 4;
        const y = height / 2;
        const angle = (Math.random() - 0.5) * 0.4; // rotate between -0.2 and 0.2 radians

        ctx.save();
        ctx.fillStyle = '#374151';
        ctx.translate(x, y);
        ctx.rotate(angle);
        ctx.fillText(char, 0, 0);
        ctx.restore();
      }

      // Draw noise dots
      for (let i = 0; i < 30; i++) {
        ctx.fillStyle = `rgba(0,0,0,${Math.random() * 0.2})`;
        ctx.beginPath();
        ctx.arc(randomInt(0, width), randomInt(0, height), 1, 0, 2 * Math.PI);
        ctx.fill();
      }
    }

    function refreshCaptcha() {
      captchaText = generateCaptchaText();
      drawCaptcha(captchaText);
      captchaInput.value = '';
      captchaError.style.display = 'none';
    }

    refreshBtn.addEventListener('click', refreshCaptcha);

    // Initialize captcha on load
    refreshCaptcha();

    // Remove tag on clicking the X
    document.getElementById('tags-container').addEventListener('click', function(e) {
      if (e.target.classList.contains('fa-times')) {
        e.target.parentElement.remove();
      }
    });

    // Keyboard accessibility for tag remove buttons
    document.getElementById('tags-container').addEventListener('keydown', function(e) {
      if (e.target.classList.contains('fa-times') && (e.key === 'Enter' || e.key === ' ')) {
        e.preventDefault();
        e.target.parentElement.remove();
      }
    });

    // Add skill on Enter key
    const addSkillInput = document.getElementById('add-skill');
    const tagsContainer = document.getElementById('tags-container');
    addSkillInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        const val = addSkillInput.value.trim();
        if (val === '') return;
        // Check if tag already exists
        const existingTags = Array.from(tagsContainer.querySelectorAll('.tag')).map(t => t.textContent.trim());
        if (existingTags.includes(val)) {
          addSkillInput.value = '';
          return;
        }
        const span = document.createElement('span');
        span.className = 'tag';
        span.textContent = val + ' ';
        const i = document.createElement('i');
        i.className = 'fas fa-times';
        i.setAttribute('data-tag', val);
        i.setAttribute('role', 'button');
        i.setAttribute('tabindex', '0');
        i.setAttribute('aria-label', `Remove ${val} skill`);
        span.appendChild(i);
        tagsContainer.appendChild(span);
        addSkillInput.value = '';
      }
    });

    // Auto-focus next input for phone/email code inputs
    function setupAutoTab(containerId) {
      const inputs = document.querySelectorAll(`#${containerId} input`);
      inputs.forEach((input, idx) => {
        input.addEventListener('input', () => {
          if (input.value.length === input.maxLength && idx < inputs.length - 1) {
            inputs[idx + 1].focus();
          }
        });
        input.addEventListener('keydown', (e) => {
          if (e.key === 'Backspace' && input.value.length === 0 && idx > 0) {
            inputs[idx - 1].focus();
          }
        });
      });
    }
    setupAutoTab('phone-inputs');
    setupAutoTab('email-inputs');

    // Resend code click handlers (just alert for demo)
    document.getElementById('phone-resend').addEventListener('click', () => {
      alert('Phone code resent');
    });
    document.getElementById('phone-resend').addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        alert('Phone code resent');
      }
    });
    document.getElementById('email-resend').addEventListener('click', () => {
      alert('Email code resent');
    });
    document.getElementById('email-resend').addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        alert('Email code resent');
      }
    });

    // Send OTP button click (demo)
    document.getElementById('send-otp-btn').addEventListener('click', () => {
      alert('OTP sent');
    });

    // Form submission with captcha validation
    document.getElementById('profile-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const userCaptcha = captchaInput.value.trim().toUpperCase();
      if (userCaptcha !== captchaText) {
        captchaError.style.display = 'block';
        captchaInput.focus();
        refreshCaptcha();
        return;
      }
      captchaError.style.display = 'none';
      alert('Form submitted successfully!');
      // Here you can add actual form submission logic
    });
  </script>
</body>
</html>